{% extends "core/base.html" %}
{% load static %}
{% load humanize %}


{% block title %}
  
{% endblock title %}

{% block head %}

{% endblock head %}

{% block content %}
  <br>

  <div class="container">
    <div class="row">
      <div class="col-4">
        {% if game.image %}
          <img class="img-responsive" style="width: 100%" src="{{ game.image.url }}" alt="{{ game.basegame.name }}">
        {% else %}
          <img class="img-responsive" style="width: 100%" src="{% static 'core/images/default.png' %}" alt="Default image">
        {% endif %}
      </div>
      <div class="col-8">

        <p>{{ game.basegame.name }}</p>

        <p>{{ game.baseconsole }}</p>

        <p>{{ game.basegame.summary }}</p>

        {% if request.user.is_superuser %}
        <p><a href="{% url 'basegames:games-detail' basegame_pk=game.basegame.pk game_pk=game.pk %}">View Admin page</a></p>
        {% endif %}

        <p><a href="{% url 'gamelistings-create' baseconsole_slug=view.kwargs.baseconsole_slug game_slug=view.kwargs.game_slug %}">Add to your collection</a></p>

      </div>
    </div>

    <hr style="border-color:black;">

    <br>

    <div class="row" style="justify-content: center">
      <br>
      <h1>LISTINGS</h1>
    </div>

    <div class="row card-deck">
      {% for gamelisting in game.gamelisting_set.all %}
        <div class="col-6 col-sm-4 col-lg-3" style="padding: 1.5rem">
          <div class="card">
            {% if gamelisting.gamelistingimage_set.first %}
              <img class="card-img-top" style="width: 100%" src="{{ gamelisting.gamelistingimage_set.first.image.url }}" alt="{{ gamelisting.gamelistingimage_set.first }}">
            {% else %}
              <img class="card-img-top" style="width: 100%" src="{% static 'core/images/default.png' %}" alt="Default image">
            {% endif %}
            <div class="card-block">
              <h4 class="card-title text-center">{{ gamelisting.price }}</h4>
              <p class="card-text hidden-md-down">{{ gamelisting.user }} | {{ gamelisting.condition }}</p>
            </div>
            <div class="card-footer text-center">
              <a href="{{ gamelisting.get_absolute_url }}" class="card-link">View More</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock content %}